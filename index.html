<head>
    <style>
        body {
            margin: 0;
        }
    </style>

    <script src="//unpkg.com/react/umd/react.production.min.js"></script>
    <script src="//unpkg.com/react-dom/umd/react-dom.production.min.js"></script>
    <script src="//unpkg.com/babel-standalone"></script>

    <script src="//unpkg.com/d3"></script>
    <script src="//unpkg.com/polished@3.5.2/dist/polished.js"></script>

    <script src="//unpkg.com/react-globe.gl"></script>
    <!--<script src="../../dist/react-globe.gl.js"></script>-->
</head>

<body>
    <div id="globeViz"></div>

    <script type="text/jsx">
        const { useState, useEffect } = React;
        const shieldRing = { lat: 90, lng: 0 };
    
        const World = () => {
        const [cities, setCities] = useState([]);
    
        useEffect(() => {
            // load data
            fetch('https://v1.nocodeapi.com/triplea87/webflow/bAJqZJoRApBDTdQJ').then(res => res.json())
            .then(d => setCities(d.items));
        }, []);

        const getTooltip = d => `
            <div style="text-align: center; font-size: 24px; font-family: 'Courier New', Courier, monospace;">
            <div><b>build_${d.name}</b></div>
            </div>
        `;
    
        return <Globe
            globeImageUrl="//unpkg.com/three-globe/example/img/earth-night.jpg"
            backgroundImageUrl="//unpkg.com/three-globe/example/img/night-sky.png"
    
            pointsData={cities}
            pointLat="lat"
            pointLng="lon"
            pointAltitude={0.1}
            pointRadius={0.9}
            pointColor={d => d["city-status"] ? d["city-status"] : "#ffffff"}
            pointResolution={24}
            pointLabel={getTooltip}

            labelsData={cities}
            labelLat="lat"
            labelLng="lon"
            labelAltitude={0.005}
            labelDotRadius={0.7}
            labelDotOrientation={() => 'bottom'}
            labelColor={"#ffffff"}
            labelText=""
            labelSize={0.15}
            labelResolution={1}
            labelLabel={getTooltip}

            ringsData={[shieldRing]}
            ringAltitude={0.05}
            ringColor={() => "#75FA70"}
            ringMaxRadius={180}
            ringPropagationSpeed={20}
            ringRepeatPeriod={200}

            onPointClick={d => window.open(d['nft-link'], '_blank')}
        />;
        };
    
        ReactDOM.render(
            <World />,
            document.getElementById('globeViz')
        );
  </script>
</body>